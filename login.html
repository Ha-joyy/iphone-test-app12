<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <!-- 아이폰 노치 영역 처리를 위한 뷰포트 메타 태그 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <title>edms 로그인</title>
  <link rel="stylesheet" href="css/login.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/popup.css">
  <!-- Google Fonts에서 Noto Sans KR 폰트 불러오기 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="login-page">
    <div class="container">
      <!-- 상단 헤더 영역 -->
      <header class="header">
        <!-- 로고 -->
        <img src="img/logo_edms.png" alt="edms Logo" class="logo">

        <!-- 환영 및 안내 문구 -->
        <div class="welcome-text">
          <h1>안녕하세요.<br>EDMS 입니다.</h1>
          <p>회원 서비스 이용을 위해 로그인해 주세요.</p>
        </div>
      </header>

      <!-- 메인 컨텐츠 영역 -->
      <main class="main-content">
        <!-- 로그인 폼 -->
        <form class="login-form">
            <button type="button" class="select-btn" id="btm-link">이용하실 매장을 선택해주세요.</button>
            <div class="input-group">
                <input type="text" id="id-input"  placeholder=" " autocomplete="off">
                <label for="id-input">아이디</label>
            </div>
            <div class="mssg_error">
              <p class="active">입력한 아이디가 존재하지 않습니다.</p>
            </div>
            <div class="input-group">
                <input type="password" id="password-input"  placeholder=" " autocomplete="off">
                <label for="password-input">비밀번호</label>
            </div>
            <div class="mssg_error">
              <p class="active">비밀번호가 틀렸습니다.</p>
            </div>
        </form>

        <!-- 링크 그룹 -->
        <div class="link-group">
            <a href="#">아이디 찾기</a>
            <span>|</span>
            <a href="#">비밀번호 찾기</a>
            <span>|</span>
            <a href="index.html">회원가입</a>
        </div>
      </main>

      <!-- 하단 '로그인하기' 버튼 영역 -->
      <footer class="footer">
        <button class="login-button">
            로그인
        </button>
      </footer>
    </div>
    <div id="bottomSheetOverlay">
      <div id="bottomSheet">
        <div class="layer_box active" tabindex="0">
        
          <!-- 박스 확장 버튼은 모바일 바텀시트에서는 사용하지 않아 숨김 처리 (CSS에서 display: none 처리됨) -->
          <div class="btn_layer_expanded">
            <button type="button" aria-expanded="false" aria-label="박스 확장"></button>
          </div>
          
          <div class="layer_header">
            <!-- H1 대신 H2를 사용하여 모달 타이틀로 구분 -->
            <h2 class="layer_title">이용하실 매장/계좌 선택</h2> 
            <button class="sheet-close-button" id="closeSheetButton" aria-label="닫기">&times;</button>
          </div>
          <div class="layer_container">
            <div class="layer_contents">
              <div class="combo_list_wrap">
                <ul class="combo_list">
                  <li>
                    <button type="button" aria-pressed="true">
                      <span class="nick">서울점 (현재 선택)</span>
                      <span class="code">EDMS_STORE_001</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">부산점</span>
                      <span class="code">EDMS_STORE_002</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="code">EDMS_STORE_003</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">광주점</span>
                      <span class="code">EDMS_STORE_004</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대전점</span>
                      <span class="code">EDMS_STORE_005</span>
                    </button>
                  </li>
                  
                </ul>
              </div>
            </div>
          </div>

          <!-- 이 버튼도 닫기 기능에 연결합니다. -->
          <button type="button" class="layer_close" id="extraCloseButton"><em class="blind">닫기</em></button> 
        </div>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
            
        // 바텀 시트 관련 DOM 요소
        const openButton = document.getElementById('btm-link'); 
        const overlay = document.getElementById('bottomSheetOverlay');
        const closeButtonX = document.getElementById('closeSheetButton');
        const closeButtonExtra = document.getElementById('extraCloseButton');
        
        // 트랜지션 시간 (CSS와 일치해야 함)
        const TRANSITION_DURATION_MS = 300; 

        // --- 바텀 시트 로직 시작 ---
        const openBottomSheet = (e) => {
            if (e) e.preventDefault(); 
            
            // 1. visibility를 바로 visible로 변경
            overlay.style.visibility = 'visible'; 
            
            // 2. active 클래스 추가로 애니메이션 시작 (슬라이드 업)
            overlay.classList.add('active');
            
            // 3. 배경 스크롤 방지
            document.body.style.overflow = 'hidden'; 
        };

        const closeBottomSheet = () => {
            // 1. active 클래스 제거로 애니메이션 시작 (슬라이드 다운)
            overlay.classList.remove('active');
            
            // 2. 애니메이션이 끝날 때까지 기다린 후 body 스크롤 복구
            setTimeout(() => {
                document.body.style.overflow = '';
                // 3. visibility를 hidden으로 변경하여 터치 이벤트 방지
                overlay.style.visibility = 'hidden'; 
            }, TRANSITION_DURATION_MS);
        };

        // 이벤트 리스너 연결
        openButton.addEventListener('click', openBottomSheet); // "이용하실 매장을 선택해주세요." 연결
        closeButtonX.addEventListener('click', closeBottomSheet); // X 닫기 버튼 연결
        closeButtonExtra.addEventListener('click', closeBottomSheet); // 추가 닫기 버튼 연결
        
        // 오버레이(배경) 클릭 시 팝업 닫기
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
                closeBottomSheet();
            }
        });
        // --- 바텀 시트 로직 종료 ---
      });
    </script>
</body>
</html>

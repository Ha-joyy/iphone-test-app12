<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <!-- 아이폰 노치 영역 처리를 위한 뷰포트 메타 태그 -->
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no, maximum-scale=1.0">
  <title>edms 로그인</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/login.css">
  <link rel="stylesheet" href="css/popup.css">
  <!-- Google Fonts에서 Noto Sans KR 폰트 불러오기 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="login-page">
    <div class="container">
      <!-- 상단 헤더 영역 -->
      <header class="header">
        <!-- 로고 -->
        <img src="img/logo_edms.png" alt="edms Logo" class="logo">

        <!-- 환영 및 안내 문구 -->
        <div class="welcome-text">
          <h1>안녕하세요.<br>EDMS 입니다.</h1>
          <p>회원 서비스 이용을 위해 로그인해 주세요.</p>
        </div>
      </header>

      <!-- 메인 컨텐츠 영역 -->
      <main class="main-content">
        <!-- 로그인 폼 -->
        <form class="login-form">

            <!-- 매장 선택 시 버튼에 active 클래스명 추가 -->
            <button type="button" class="select-btn btm-link">이용 매장 선택</button>
            <div class="input-group">
                <input type="text" id="id-input"  placeholder=" " autocomplete="off">
                <label for="id-input">아이디</label>
            </div>
            <div class="mssg_error">
              <p class="active">입력한 아이디가 존재하지 않습니다.</p>
            </div>
            <div class="input-group">
                <input type="password" id="password-input"  placeholder=" " autocomplete="off">
                <label for="password-input">비밀번호</label>
            </div>
            <div class="mssg_error">
              <p class="active">비밀번호가 틀렸습니다.</p>
            </div>

            <div class="flex">
              <div class="custom-checkbox">
                <input type="checkbox" class="check1">
                <label for="check1" class="bold-label">자동로그인</label>
              </div>
              <div class="custom-checkbox">
                <input type="checkbox" class="check2">
                <label for="check2" class="bold-label">아이디저장</label>
              </div>
            </div>
        </form>

        <!-- 링크 그룹 -->
        <div class="link-group">
            <a href="#">아이디 찾기</a>
            <span>|</span>
            <a href="#">비밀번호 찾기</a>
            <span>|</span>
            <a href="index.html">회원가입</a>
        </div>
      </main>

      <!-- 하단 '로그인하기' 버튼 영역 -->
      <footer class="footer">
        <button class="login-button">
            로그인
        </button>
      </footer>
    </div>
    <div class="bottomSheetOverlay">
      <div class="bottomSheet">
        <div class="layer_box active" tabindex="0">          
          <div class="layer_header">
            <h2 class="layer_title">이용 매장 선택</h2> 
            <button class="sheet-close-button closeSheetButton" aria-label="닫기"><span class="hidden">닫기</span></button>
          </div>
          <div class="layer_container">
            <div class="layer_contents">
              <div class="combo_list_wrap">
                <ul class="combo_list">
                  <li>
                    <button type="button" aria-pressed="true">
                      <span class="nick">서울점 (현재 선택)</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">부산점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  <li>
                    <button type="button" aria-pressed="false">
                      <span class="nick">대구점</span>
                      <span class="add">서울 서초구 서초동 1571-30</span>
                    </button>
                  </li>
                  
                </ul>
              </div>
            </div>
          </div>

          <!-- 이 버튼도 닫기 기능에 연결합니다. -->
          <button type="button" class="layer_close extraCloseButton"><em class="blind">닫기</em></button> 
        </div>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        
        // --- 1. DOM 요소 선택 수정 (querySelectorAll -> querySelector) ---
        // querySelector를 사용해 해당 클래스를 가진 첫 번째 요소만 선택합니다.
        const openButton = document.querySelector('.btm-link'); 
        const overlay = document.querySelector('.bottomSheetOverlay');
        const closeButtonX = document.querySelector('.closeSheetButton');
        const closeButtonExtra = document.querySelector('.extraCloseButton');
        const layerContainer = document.querySelector('.layer_container');

        // 트랜지션 시간 (CSS와 일치해야 함)
        const TRANSITION_DURATION_MS = 300; 

        // --- 바텀 시트 로직 시작 ---
        const openBottomSheet = (e) => {
            if (e) e.preventDefault(); 
            
            if (overlay) {
                overlay.style.visibility = 'visible';
                overlay.classList.add('active');
                // 팝업이 열릴 때 스크롤 초기화
                if (layerContainer) layerContainer.scrollTop = 0; 
            }
            document.body.style.overflow = 'hidden'; 
        };

        const closeBottomSheet = () => {
            if (overlay) {
                overlay.classList.remove('active');
                setTimeout(() => {
                    document.body.style.overflow = '';
                    overlay.style.visibility = 'hidden'; 
                }, TRANSITION_DURATION_MS);
            }
        };

        // --- 2. 이벤트 리스너 연결 (요소 존재 여부 체크 후 연결) ---
        
        // "이용 매장 선택" 버튼 연결
        if (openButton) {
            openButton.addEventListener('click', openBottomSheet); 
        }
        
        // 닫기 버튼 연결 (X 닫기 버튼)
        if (closeButtonX) {
            closeButtonX.addEventListener('click', closeBottomSheet); 
        }
        
        // 추가 닫기 버튼 연결
        if (closeButtonExtra) {
            closeButtonExtra.addEventListener('click', closeBottomSheet); 
        }
        
        // 오버레이(배경) 클릭 시 팝업 닫기
        if (overlay) {
            overlay.addEventListener('click', (e) => {
                // 클릭된 요소가 오버레이(배경) 자체일 때만 닫기
                if (e.target === overlay) {
                    closeBottomSheet();
                }
            });
        }
        // --- 바텀 시트 로직 종료 ---
      });
    </script>
</body>
</html>
